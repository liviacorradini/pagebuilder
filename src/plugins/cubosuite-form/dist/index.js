/*! cubo-form - 1.0.41 */
!function(e,t){'object'==typeof exports&&'object'==typeof module?module.exports=t():'function'==typeof define&&define.amd?define([],t):'object'==typeof exports?exports["cubo-form"]=t():e["cubo-form"]=t()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})}},t={};function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.r(t),e.d(t,{default:()=>l});const o=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.DomComponents,r=null!==(t=o.pipes)&&void 0!==t?t:[],c=null!==(n=o.customfields)&&void 0!==n?n:[];a.addType('cubosuite-button',{model:{defaults:{tagName:'button',droppable:!1,attributes:{type:'submit'},components:[{tagName:'span',components:'Enviar'}]}},view:{}});var l=function(e){var t=this;VMasker(document.querySelector("[name='phone']")).maskPattern('(99) 99999-9999'),this.addEventListener('submit',(function(n){n.preventDefault(),n.target.setAttribute('disable',!0),e.pipe&&e.keycubo||alert('API KEY ou Funil não selecionados.');var o=t;if(new Pristine(t).validate()){var a=o.querySelectorAll('input, select'),r={title:o.querySelector("[name='name']").value,peopleName:o.querySelector("[name='name']").value,peoplePhone:o.querySelector("[name='phone']").value,pipeId:e.pipe,customfields:[]};a.forEach((function(e){var t=e.getAttribute('type'),n=e.getAttribute('name'),o=e.getAttribute('data-cf');if('name'!==n&&'phone'!==n){if('text'===t||'email'===t){var a=o.toLowerCase().split(' ').join('_'),c=window.location.search,l=new URLSearchParams(c);e.value||(e.value=l.get(a)?l.get(a):null),e.value&&r.customfields.push({customfieldId:parseInt(e.getAttribute('name')),value:e.value})}'select'===t&&e.options[e.selectedIndex].value&&r.customfields.push({customfieldId:parseInt(e.getAttribute('name')),value:e.options[e.selectedIndex].value})}})),r.customfields=r.customfields.filter((function(e){return e.value})),fetch('https://api.cubosuite.com.br/deals/external?asyncRequest=true',{method:'POST',headers:{'Content-type':'application/json',Authorization:"Bearer ".concat(e.keycubo)},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(t){n.target.setAttribute('disable',!1),e.redirect&&(window.location.href=e.redirect)}))}}))};a.addType('cubosuite-form',{model:{defaults:{tagName:'form',droppable:!1,attributes:{method:'POST'},traits:[{label:'Api key',type:'text',name:'keycubo',changeProp:!0},{label:'Funíl',type:'select',name:'pipe',changeProp:!0,options:r},{label:'Redirecionar para',type:'text',name:'redirect',changeProp:!0}],pipe:'',keycubo:'',redirect:'',script:l,'script-props':['pipe','keycubo','redirect','button'],components:function(e){var t="\n          <div class=\"form-group\">\n            <label class=\"label\">Nome</label>\n            <input placeholder=\"Insira o nome\" type=\"text\" name=\"name\" required class=\"form-control\"/>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"label\">Telefone</label>\n            <input placeholder=\"Insira o telefone\" type=\"text\" required name=\"phone\" class=\"form-control\"/>\n          </div>\n          ";return c.forEach((function(e){var n="";if('text'===e.type&&(n="\n              <div class=\"form-group\">\n                <label class=\"label\">".concat(e.name,"</label>\n                <input placeholder=\"Insira o ").concat(e.name,"\"  type=\"text\" name=\"").concat(e.id,"\" class=\"form-control\" data-cf=\"").concat(e.name,"\"/>\n              </div>")),'selectbox'===e.type){var o="<option selected disabled value=''>Selecione um ".concat(e.name,"</option>");e.options.forEach((function(e){o+="<option value=\"".concat(e.value,"\">").concat(e.value,"</option>")})),n="\n              <div class=\"form-group\">\n                <label class=\"label\">".concat(e.name,"</label>\n                <select name=\"").concat(e.id,"\" type=\"select\" class=\"form-control\" data-cf=\"").concat(e.name,"\">\n                ").concat(o,"\n                </select>\n              </div>")}t+=n})),t+="<button data-gjs-type=\"cubosuite-button\" class=\"btn btn-primary\"><span>Enviar</span></button>"}}},view:{}})},a=function(e){var t=e.BlockManager;t.add('cubosuite-form',{label:'Formulário Cubo Suite',content:{type:'cubosuite-form'},category:'Forms',media:"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <svg id=\"Camada_2\" data-name=\"Camada 2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 128.18 144.05\">\n      <defs>\n        <style>\n          .cls-1 {\n            fill: #fff;\n          }\n        </style>\n      </defs>\n      <g id=\"Camada_1-2\" data-name=\"Camada 1\">\n        <g>\n          <path class=\"cls-1\" d=\"M64.09,144.05c-2.21,0-4.41-.57-6.38-1.7L6.38,112.71c-3.93-2.27-6.38-6.5-6.38-11.05V42.39c0-4.54,2.44-8.77,6.38-11.05L57.71,1.7c3.93-2.27,8.82-2.27,12.75,0l51.33,29.64c3.93,2.27,6.38,6.5,6.38,11.05v59.28c0,4.54-2.44,8.77-6.38,11.05l-51.33,29.64c-1.97,1.14-4.17,1.7-6.38,1.7Zm0-138.72c-1.28,0-2.57,.33-3.71,.99L9.04,35.95c-2.29,1.32-3.71,3.79-3.71,6.43v59.28c0,2.64,1.42,5.11,3.71,6.43l51.33,29.64c2.29,1.32,5.14,1.32,7.43,0l51.33-29.64c2.29-1.32,3.71-3.79,3.71-6.43V42.39c0-2.64-1.42-5.11-3.71-6.43L67.8,6.32c-1.15-.66-2.43-.99-3.71-.99Z\"/>\n          <path class=\"cls-1\" d=\"M64.14,124.2h0c-1.47,0-2.66-1.19-2.66-2.66v-51.56c0-1.07-.64-2.03-1.62-2.45L22.03,51.43c-1.35-.58-1.98-2.14-1.41-3.49h0c.58-1.35,2.14-1.98,3.49-1.41l38.99,16.6c.66,.28,1.42,.28,2.08,0l39.29-16.61c1.35-.57,2.92,.06,3.49,1.42h0c.57,1.36-.06,2.92-1.42,3.49l-38.12,16.11c-.99,.42-1.63,1.38-1.63,2.45v51.55c0,1.47-1.19,2.66-2.66,2.66Z\"/>\n        </g>\n      </g>\n    </svg> \n    "})};function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?r(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=c(c({},{}),t);o(e,n),a(e,n)};return t})()));
//# sourceMappingURL=index.js.map