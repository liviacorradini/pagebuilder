{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*! cubo-form - 1.0.41 */\n!function (e, t) {\n  'object' == typeof exports && 'object' == typeof module ? module.exports = t() : 'function' == typeof define && define.amd ? define([], t) : 'object' == typeof exports ? exports[\"cubo-form\"] = t() : e[\"cubo-form\"] = t();\n}('undefined' != typeof globalThis ? globalThis : 'undefined' != typeof window ? window : this, () => (() => {\n  \"use strict\";\n\n  var e = {\n      d: (t, n) => {\n        for (var o in n) e.o(n, o) && !e.o(t, o) && Object.defineProperty(t, o, {\n          enumerable: !0,\n          get: n[o]\n        });\n      },\n      o: (e, t) => Object.prototype.hasOwnProperty.call(e, t),\n      r: e => {\n        'undefined' != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\n          value: 'Module'\n        }), Object.defineProperty(e, '__esModule', {\n          value: !0\n        });\n      }\n    },\n    t = {};\n  function n(e, t, n) {\n    return t in e ? Object.defineProperty(e, t, {\n      value: n,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }) : e[t] = n, e;\n  }\n  e.r(t), e.d(t, {\n    default: () => l\n  });\n  const o = function (e) {\n      var t,\n        n,\n        o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n        a = e.DomComponents,\n        r = null !== (t = o.pipes) && void 0 !== t ? t : [],\n        c = null !== (n = o.customfields) && void 0 !== n ? n : [];\n      a.addType('cubosuite-button', {\n        model: {\n          defaults: {\n            tagName: 'button',\n            droppable: !1,\n            attributes: {\n              type: 'submit'\n            },\n            components: [{\n              tagName: 'span',\n              components: 'Enviar'\n            }]\n          }\n        },\n        view: {}\n      });\n      var l = function (e) {\n        var t = this;\n        VMasker(document.querySelector(\"[name='phone']\")).maskPattern('(99) 99999-9999'), this.addEventListener('submit', function (n) {\n          n.preventDefault(), n.target.setAttribute('disable', !0), e.pipe && e.keycubo || alert('API KEY ou Funil não selecionados.');\n          var o = t;\n          if (new Pristine(t).validate()) {\n            var a = o.querySelectorAll('input, select'),\n              r = {\n                title: o.querySelector(\"[name='name']\").value,\n                peopleName: o.querySelector(\"[name='name']\").value,\n                peoplePhone: o.querySelector(\"[name='phone']\").value,\n                pipeId: e.pipe,\n                customfields: []\n              };\n            a.forEach(function (e) {\n              var t = e.getAttribute('type'),\n                n = e.getAttribute('name'),\n                o = e.getAttribute('data-cf');\n              if ('name' !== n && 'phone' !== n) {\n                if ('text' === t || 'email' === t) {\n                  var a = o.toLowerCase().split(' ').join('_'),\n                    c = window.location.search,\n                    l = new URLSearchParams(c);\n                  e.value || (e.value = l.get(a) ? l.get(a) : null), e.value && r.customfields.push({\n                    customfieldId: parseInt(e.getAttribute('name')),\n                    value: e.value\n                  });\n                }\n                'select' === t && e.options[e.selectedIndex].value && r.customfields.push({\n                  customfieldId: parseInt(e.getAttribute('name')),\n                  value: e.options[e.selectedIndex].value\n                });\n              }\n            }), r.customfields = r.customfields.filter(function (e) {\n              return e.value;\n            }), fetch('https://api.cubosuite.com.br/deals/external?asyncRequest=true', {\n              method: 'POST',\n              headers: {\n                'Content-type': 'application/json',\n                Authorization: \"Bearer \".concat(e.keycubo)\n              },\n              body: JSON.stringify(r)\n            }).then(function (e) {\n              return e.json();\n            }).then(function (t) {\n              n.target.setAttribute('disable', !1), e.redirect && (window.location.href = e.redirect);\n            });\n          }\n        });\n      };\n      a.addType('cubosuite-form', {\n        model: {\n          defaults: {\n            tagName: 'form',\n            droppable: !1,\n            attributes: {\n              method: 'POST'\n            },\n            traits: [{\n              label: 'Api key',\n              type: 'text',\n              name: 'keycubo',\n              changeProp: !0\n            }, {\n              label: 'Funíl',\n              type: 'select',\n              name: 'pipe',\n              changeProp: !0,\n              options: r\n            }, {\n              label: 'Redirecionar para',\n              type: 'text',\n              name: 'redirect',\n              changeProp: !0\n            }],\n            pipe: '',\n            keycubo: '',\n            redirect: '',\n            script: l,\n            'script-props': ['pipe', 'keycubo', 'redirect', 'button'],\n            components: function (e) {\n              var t = \"\\n          <div class=\\\"form-group\\\">\\n            <label class=\\\"label\\\">Nome</label>\\n            <input placeholder=\\\"Insira o nome\\\" type=\\\"text\\\" name=\\\"name\\\" required class=\\\"form-control\\\"/>\\n          </div>\\n          <div class=\\\"form-group\\\">\\n            <label class=\\\"label\\\">Telefone</label>\\n            <input placeholder=\\\"Insira o telefone\\\" type=\\\"text\\\" required name=\\\"phone\\\" class=\\\"form-control\\\"/>\\n          </div>\\n          \";\n              return c.forEach(function (e) {\n                var n = \"\";\n                if ('text' === e.type && (n = \"\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"label\\\">\".concat(e.name, \"</label>\\n                <input placeholder=\\\"Insira o \").concat(e.name, \"\\\"  type=\\\"text\\\" name=\\\"\").concat(e.id, \"\\\" class=\\\"form-control\\\" data-cf=\\\"\").concat(e.name, \"\\\"/>\\n              </div>\")), 'selectbox' === e.type) {\n                  var o = \"<option selected disabled value=''>Selecione um \".concat(e.name, \"</option>\");\n                  e.options.forEach(function (e) {\n                    o += \"<option value=\\\"\".concat(e.value, \"\\\">\").concat(e.value, \"</option>\");\n                  }), n = \"\\n              <div class=\\\"form-group\\\">\\n                <label class=\\\"label\\\">\".concat(e.name, \"</label>\\n                <select name=\\\"\").concat(e.id, \"\\\" type=\\\"select\\\" class=\\\"form-control\\\" data-cf=\\\"\").concat(e.name, \"\\\">\\n                \").concat(o, \"\\n                </select>\\n              </div>\");\n                }\n                t += n;\n              }), t += \"<button data-gjs-type=\\\"cubosuite-button\\\" class=\\\"btn btn-primary\\\"><span>Enviar</span></button>\";\n            }\n          }\n        },\n        view: {}\n      });\n    },\n    a = function (e) {\n      var t = e.BlockManager;\n      t.add('cubosuite-form', {\n        label: 'Formulário Cubo Suite',\n        content: {\n          type: 'cubosuite-form'\n        },\n        category: 'Forms',\n        media: \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n    <svg id=\\\"Camada_2\\\" data-name=\\\"Camada 2\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 128.18 144.05\\\">\\n      <defs>\\n        <style>\\n          .cls-1 {\\n            fill: #fff;\\n          }\\n        </style>\\n      </defs>\\n      <g id=\\\"Camada_1-2\\\" data-name=\\\"Camada 1\\\">\\n        <g>\\n          <path class=\\\"cls-1\\\" d=\\\"M64.09,144.05c-2.21,0-4.41-.57-6.38-1.7L6.38,112.71c-3.93-2.27-6.38-6.5-6.38-11.05V42.39c0-4.54,2.44-8.77,6.38-11.05L57.71,1.7c3.93-2.27,8.82-2.27,12.75,0l51.33,29.64c3.93,2.27,6.38,6.5,6.38,11.05v59.28c0,4.54-2.44,8.77-6.38,11.05l-51.33,29.64c-1.97,1.14-4.17,1.7-6.38,1.7Zm0-138.72c-1.28,0-2.57,.33-3.71,.99L9.04,35.95c-2.29,1.32-3.71,3.79-3.71,6.43v59.28c0,2.64,1.42,5.11,3.71,6.43l51.33,29.64c2.29,1.32,5.14,1.32,7.43,0l51.33-29.64c2.29-1.32,3.71-3.79,3.71-6.43V42.39c0-2.64-1.42-5.11-3.71-6.43L67.8,6.32c-1.15-.66-2.43-.99-3.71-.99Z\\\"/>\\n          <path class=\\\"cls-1\\\" d=\\\"M64.14,124.2h0c-1.47,0-2.66-1.19-2.66-2.66v-51.56c0-1.07-.64-2.03-1.62-2.45L22.03,51.43c-1.35-.58-1.98-2.14-1.41-3.49h0c.58-1.35,2.14-1.98,3.49-1.41l38.99,16.6c.66,.28,1.42,.28,2.08,0l39.29-16.61c1.35-.57,2.92,.06,3.49,1.42h0c.57,1.36-.06,2.92-1.42,3.49l-38.12,16.11c-.99,.42-1.63,1.38-1.63,2.45v51.55c0,1.47-1.19,2.66-2.66,2.66Z\\\"/>\\n        </g>\\n      </g>\\n    </svg> \\n    \"\n      });\n    };\n  function r(e, t) {\n    var n = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      t && (o = o.filter(function (t) {\n        return Object.getOwnPropertyDescriptor(e, t).enumerable;\n      })), n.push.apply(n, o);\n    }\n    return n;\n  }\n  function c(e) {\n    for (var t = 1; t < arguments.length; t++) {\n      var o = null != arguments[t] ? arguments[t] : {};\n      t % 2 ? r(Object(o), !0).forEach(function (t) {\n        n(e, t, o[t]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(o)) : r(Object(o)).forEach(function (t) {\n        Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(o, t));\n      });\n    }\n    return e;\n  }\n  const l = function (e) {\n    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {},\n      n = c(c({}, {}), t);\n    o(e, n), a(e, n);\n  };\n  return t;\n})());","map":{"version":3,"mappings":";;CAAA,UAA2CA,GAAMC;EAC1B,mBAAZC,WAA0C,mBAAXC,SACxCA,OAAOD,UAAUD,MACQ,qBAAXG,UAAyBA,OAAOC,MAC9CD,OAAO,IAAIH,KACe,mBAAZC,UACdA,QAAQ,eAAeD,MAEvBD,EAAK,eAAeC,GACrB;AAAA,CATD,CASyB,sBAAfK,aAA6BA,aAAgC,sBAAXC,SAAyBA,SAASC,MAAO,M;;;ECRrG,IAAIC,IAAsB;MCA1BA,GAAwB,CAACP,GAASQ;QACjC,KAAI,IAAIC,KAAOD,GACXD,EAAoBG,EAAEF,GAAYC,OAASF,EAAoBG,EAAEV,GAASS,MAC5EE,OAAOC,eAAeZ,GAASS,GAAK;UAAEI,aAAY;UAAMC,KAAKN,EAAWC;QAAAA,EAE1E;MAAA;MCNDF,GAAwB,CAACQ,GAAKC,MAAUL,OAAOM,UAAUC,eAAeC,KAAKJ,GAAKC;MCClFT,GAAyBP;QACH,sBAAXoB,UAA0BA,OAAOC,eAC1CV,OAAOC,eAAeZ,GAASoB,OAAOC,aAAa;UAAEC,OAAO;QAAA,IAE7DX,OAAOC,eAAeZ,GAAS,cAAc;UAAEsB,QAAO;QAAA,EAAO;MAAA;IAAA;;ECL/C,SAASC,EAAgBR,GAAKN,GAAKa;IAYhD,OAXIb,KAAOM,IACTJ,OAAOC,eAAeG,GAAKN,GAAK;MAC9Ba,OAAOA;MACPT,aAAY;MACZW,eAAc;MACdC,WAAU;IAAA,KAGZV,EAAIN,KAAOa,GAGNP,CACR;EAAA;;;;ECbD,oBAAgBW;MAAsB;QAAAC;QAAdC,IAAcC,iEAAP,CAAC;QACxBC,IAAOJ,EAAOK;QACdC,IAAK,cAAGJ,EAAKI,eAAR,cAAiB;QACtBC,IAAY,cAAGL,EAAKK,sBAAR,cAAwB;MAE1CH,EAAKI,QAAQ,oBAAoB;QAC/BC,OAAO;UACLC,UAAU;YACRC,SAAS;YACTC,YAAW;YACXC,YAAY;cAAEC,MAAM;YAAA;YACpBC,YAAY,CAAC;cAAEJ,SAAS;cAAQI,YAAY;YAAA;UAAA;QAAA;QAGhDC,MAAM,CAAC;MAAA;MAGT,IAAMC,IAAS,UAAUC;QAAO;QAE9BC,QAAQC,SAASC,cAAc,mBAAmBC,YAAY,oBAE9D1C,KAAK2C,iBAAiB,UAAU,UAACC;UAC/BA,EAAMC,kBACND,EAAME,OAAOC,aAAa,YAAW,IAEhCT,EAAMU,QAASV,EAAMW,WACxBC,MAAM;UAGR,IAAIC,IAAOC;UAIX,IAHe,IAAIC,SAASD,GACPE,YAEV;YACT,IAAIC,IAASJ,EAAKK,iBAAiB;cAE/BC,IAAU;gBACZC,OAAOP,EAAKV,cAAc,iBAAiBzB;gBAC3C2C,YAAYR,EAAKV,cAAc,iBAAiBzB;gBAChD4C,aAAaT,EAAKV,cAAc,kBAAkBzB;gBAClD6C,QAAQvB,EAAMU;gBACdrB,cAAc;cAAA;YAWhB4B,EAAOO,QAAQ,UAACC;cACd,IAAI7B,IAAO6B,EAAMC,aAAa;gBAC1BC,IAAOF,EAAMC,aAAa;gBAC1BE,IAAkBH,EAAMC,aAAa;cAEzC,IAAa,WAATC,KAA4B,YAATA,GAAkB;gBACvC,IAAa,WAAT/B,KAA4B,YAATA,GAAkB;kBAEvC,IAAM+B,IAAOC,EAAgBC,cAAcC,MAAM,KAAKC,KAAK;oBACrDC,IAAcvE,OAAOwE,SAASC;oBAC9BC,IAAY,IAAIC,gBAAgBJ;kBAClCP,EAAM/C,UAAO+C,EAAM/C,QAAQyD,EAAUjE,IAAIyD,KAAQQ,EAAUjE,IAAIyD,KAAQ,OAIvEF,EAAM/C,SACRyC,EAAQ9B,aAAagD,KAAK;oBACxBC,eAAeC,SAASd,EAAMC,aAAa;oBAC3ChD,OAAO+C,EAAM/C;kBAAAA,EAGlB;gBAAA;gBACY,aAATkB,KACE6B,EAAMe,QAAQf,EAAMgB,eAAe/D,SACrCyC,EAAQ9B,aAAagD,KAAK;kBACxBC,eAAeC,SAASd,EAAMC,aAAa;kBAC3ChD,OAAO+C,EAAMe,QAAQf,EAAMgB,eAAe/D;gBAAAA,EAIjD;cAAA;YACF,IAEDyC,EAAQ9B,eAAe8B,EAAQ9B,aAAaqD,OAAO;cAAE,OAAIC,EAAGjE,KAAP;YAAA,IAErDkE,MAAM,iEAAiE;cACrEC,QAAQ;cACRC,SAAS;gBACP,gBAAiB;gBACjBC,gCAA4B/C,EAAMW;cAAAA;cAEpCqC,MAAMC,KAAKC,UAAU/B;YAAAA,GAEtBgC,KAAK;cAAQ,OAAIC,EAASC,MAAb;YAAA,GACbF,KAAK;cACJ7C,EAAME,OAAOC,aAAa,YAAW,IACjCT,EAAMsD,aACR7F,OAAOwE,SAASsB,OAAOvD,EAAMsD,SAEhC;YAAA,EACF;UAAA;QACF,EACF;MAAA;MAEDpE,EAAKI,QAAQ,kBAAkB;QAC7BC,OAAO;UACLC,UAAU;YACRC,SAAW;YACXC,YAAa;YACbC,YAAc;cAAEkD,QAAQ;YAAA;YACxBW,QAAU,CACR;cAAEC,OAAO;cAAW7D,MAAM;cAAQ+B,MAAM;cAAW+B,aAAY;YAAA,GAC/D;cACED,OAAO;cACP7D,MAAM;cACN+B,MAAM;cACN+B,aAAY;cACZlB,SAASpD;YAAAA,GAEX;cACEqE,OAAO;cACP7D,MAAM;cACN+B,MAAM;cACN+B,aAAY;YAAA;YAIhBhD,MAAQ;YACRC,SAAW;YACX2C,UAAY;YAEZvD;YAEA,gBAAgB,CAAC,QAAQ,WAAW,YAAY;YAEhDF,YAAc,UAACN;cACb,IAAIoE,IAAS;cA0Cb,OA/BAtE,EAAamC,QAAQ,UAACmB;gBACpB,IAAIlB,IAAQ;gBASZ,IARgB,WAAZkB,EAAG/C,SACL6B,IAAQ,sFAAHmC,OAEoBjB,EAAGhB,MAFvB,mEAG4BgB,EAAGhB,MAH/B,oCAG2DgB,EAAGkB,IAH9D,+CAGmGlB,EAAGhB,MAHtG,gCAOS,gBAAZgB,EAAG/C,MAAsB;kBAC3B,IAAI4C,IAAU,mDAAHoB,OAAsDjB,EAAGhB,MAAzD;kBAEXgB,EAAGH,QAAQhB,QAAQ,UAACsC;oBAClBtB,KAAW,mBAAJoB,OAAsBE,EAAIpF,OAA1B,cAAoCoF,EAAIpF,OAAxC,YACR;kBAAA,IAED+C,IAAQ,sFAAHmC,OAEoBjB,EAAGhB,MAFvB,oDAGagB,EAAGkB,IAHhB,+DAGmElB,EAAGhB,MAHtE,gCAIDa,GAJC,oDAON;gBAAA;gBAEDmB,KAAUlC,CACX;cAAA,IAEDkC,KAAU,mGAGX;YAAA;UAAA;QAAA;QAGL7D,MAAM,CAAC;MAAA,EAxLX;IAAA;ICAAiE,cAAgBjF;MAAsB,IAC9BkF,IAAKlF,EAAOmF;MAElBD,EAAGE,IAAI,kBAAkB;QACvBT,OAAO;QACPU,SAAS;UAAEvE,MAAM;QAAA;QACjBwE,UAAU;QACVC,OAAO;MAAA,EAPX;IAAA;;;;;;;;;;;;;;;;;;;;;;ECGA,oBAAgBvF;IAAsB,IAAdE,IAAcC,iEAAP,CAAC;MACxBuD,IAAU8B,EAAHA,MACR,KAGAtF;IAILuF,EAAezF,GAAQ0D,IAEvBgC,EAAW1F,GAAQ0D,EAXrB;EAAA","names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","_defineProperty","configurable","writable","editor","n","opts","arguments","domc","DomComponents","pipes","customfields","addType","model","defaults","tagName","droppable","attributes","type","components","view","script","props","VMasker","document","querySelector","maskPattern","addEventListener","event","preventDefault","target","setAttribute","pipe","keycubo","alert","form","t","Pristine","validate","fields","querySelectorAll","payload","title","peopleName","peoplePhone","pipeId","forEach","field","getAttribute","name","customfieldName","toLowerCase","split","join","queryString","location","search","urlParams","URLSearchParams","push","customfieldId","parseInt","options","selectedIndex","filter","cf","fetch","method","headers","Authorization","body","JSON","stringify","then","response","json","redirect","href","traits","label","changeProp","inputs","concat","id","opt","a","bm","BlockManager","add","content","category","media","c","loadComponents","loadBlocks"],"sourceRoot":"","sources":["webpack://cubo-form/webpack/universalModuleDefinition","webpack://cubo-form/webpack/bootstrap","webpack://cubo-form/webpack/runtime/define property getters","webpack://cubo-form/webpack/runtime/hasOwnProperty shorthand","webpack://cubo-form/webpack/runtime/make namespace object","webpack://cubo-form/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://cubo-form/src/components.js","webpack://cubo-form/src/blocks.js","webpack://cubo-form/src/index.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"cubo-form\"] = factory();\n\telse\n\t\troot[\"cubo-form\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default (editor, opts = {}) => {\n  const domc = editor.DomComponents\n  const pipes = opts.pipes ?? []\n  const customfields = opts.customfields ?? []\n\n  domc.addType('cubosuite-button', {\n    model: {\n      defaults: {\n        tagName: 'button',\n        droppable: false,\n        attributes: { type: 'submit' },\n        components: [{ tagName: 'span', components: 'Enviar' }],\n      },\n    },\n    view: {},\n  })\n\n  const script = function (props) {\n\n    VMasker(document.querySelector(\"[name='phone']\")).maskPattern('(99) 99999-9999')\n\n    this.addEventListener('submit', (event) => {\n      event.preventDefault()\n      event.target.setAttribute('disable', true)\n\n      if (!props.pipe || !props.keycubo) {\n        alert('API KEY ou Funil não selecionados.')\n      }\n\n      let form = this\n      let pristine = new Pristine(this)\n      let valid = pristine.validate()\n\n      if (valid) {\n        let fields = form.querySelectorAll('input, select')\n\n        let payload = {\n          title: form.querySelector(\"[name='name']\").value,\n          peopleName: form.querySelector(\"[name='name']\").value,\n          peoplePhone: form.querySelector(\"[name='phone']\").value,\n          pipeId: props.pipe,\n          customfields: []\n        }\n\n        const utms = [\n          'UTM Source',\n          'UTM Medium',\n          'UTM Campaign',\n          'UTM Term',\n          'UTM Content',\n        ]\n\n        fields.forEach((field) => {\n          let type = field.getAttribute('type')\n          let name = field.getAttribute('name')\n          let customfieldName = field.getAttribute('data-cf')\n\n          if (name !== 'name' && name !== 'phone') {\n            if (type === 'text' || type === 'email') {\n\n              const name = customfieldName.toLowerCase().split(' ').join('_')\n              const queryString = window.location.search\n              const urlParams = new URLSearchParams(queryString)\n              if(!field.value) field.value = urlParams.get(name) ? urlParams.get(name) : null\n              // if( utms.some(utm => utm.toLowerCase() === customfieldName.toLowerCase() )){\n              // }\n\n              if (field.value) {\n                payload.customfields.push({\n                  customfieldId: parseInt(field.getAttribute('name')),\n                  value: field.value,\n                })\n              }\n            }\n            if (type === 'select') {\n              if (field.options[field.selectedIndex].value) {\n                payload.customfields.push({\n                  customfieldId: parseInt(field.getAttribute('name')),\n                  value: field.options[field.selectedIndex].value,\n                })\n              }\n            }\n          }\n        })\n\n        payload.customfields = payload.customfields.filter(cf => cf.value)\n\n        fetch('https://api.cubosuite.com.br/deals/external?asyncRequest=true', {\n          method: 'POST',\n          headers: {\n            'Content-type' : 'application/json',\n            'Authorization' : `Bearer ${props.keycubo}`\n          },\n          body: JSON.stringify(payload)\n        })\n        .then(response => response.json())\n        .then(response => {\n          event.target.setAttribute('disable', false)\n          if (props.redirect) {\n            window.location.href = props.redirect\n          }\n        })\n      }\n    })\n  }\n\n  domc.addType('cubosuite-form', {\n    model: {\n      defaults: {\n        'tagName': 'form',\n        'droppable': false,\n        'attributes': { method: 'POST' },\n        'traits': [\n          { label: 'Api key', type: 'text', name: 'keycubo', changeProp: true },\n          {\n            label: 'Funíl',\n            type: 'select',\n            name: 'pipe',\n            changeProp: true,\n            options: pipes,\n          },\n          {\n            label: 'Redirecionar para',\n            type: 'text',\n            name: 'redirect',\n            changeProp: true,\n          },\n        ],\n\n        'pipe': '',\n        'keycubo': '',\n        'redirect': '',\n\n        script,\n\n        'script-props': ['pipe', 'keycubo', 'redirect', 'button'],\n\n        'components': (model) => {\n          let inputs = `\n          <div class=\"form-group\">\n            <label class=\"label\">Nome</label>\n            <input placeholder=\"Insira o nome\" type=\"text\" name=\"name\" required class=\"form-control\"/>\n          </div>\n          <div class=\"form-group\">\n            <label class=\"label\">Telefone</label>\n            <input placeholder=\"Insira o telefone\" type=\"text\" required name=\"phone\" class=\"form-control\"/>\n          </div>\n          `\n\n          customfields.forEach((cf) => {\n            let field = ``\n            if (cf.type === 'text') {\n              field = `\n              <div class=\"form-group\">\n                <label class=\"label\">${cf.name}</label>\n                <input placeholder=\"Insira o ${cf.name}\"  type=\"text\" name=\"${cf.id}\" class=\"form-control\" data-cf=\"${cf.name}\"/>\n              </div>`\n            }\n\n            if (cf.type === 'selectbox') {\n              let options = `<option selected disabled value=''>Selecione um ${cf.name}</option>`\n\n              cf.options.forEach((opt) => {\n                options += `<option value=\"${opt.value}\">${opt.value}</option>`\n              })\n\n              field = `\n              <div class=\"form-group\">\n                <label class=\"label\">${cf.name}</label>\n                <select name=\"${cf.id}\" type=\"select\" class=\"form-control\" data-cf=\"${cf.name}\">\n                ${options}\n                </select>\n              </div>`\n            }\n\n            inputs += field\n          })\n\n          inputs += `<button data-gjs-type=\"cubosuite-button\" class=\"btn btn-primary\"><span>Enviar</span></button>`\n          \n          return inputs\n        },\n      },\n    },\n    view: {},\n  })\n}\n","export default (editor, opts = {}) => {\n  const bm = editor.BlockManager\n\n  bm.add('cubosuite-form', {\n    label: 'Formulário Cubo Suite',\n    content: { type: 'cubosuite-form' },\n    category: 'Forms',\n    media: `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n    <svg id=\"Camada_2\" data-name=\"Camada 2\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 128.18 144.05\">\n      <defs>\n        <style>\n          .cls-1 {\n            fill: #fff;\n          }\n        </style>\n      </defs>\n      <g id=\"Camada_1-2\" data-name=\"Camada 1\">\n        <g>\n          <path class=\"cls-1\" d=\"M64.09,144.05c-2.21,0-4.41-.57-6.38-1.7L6.38,112.71c-3.93-2.27-6.38-6.5-6.38-11.05V42.39c0-4.54,2.44-8.77,6.38-11.05L57.71,1.7c3.93-2.27,8.82-2.27,12.75,0l51.33,29.64c3.93,2.27,6.38,6.5,6.38,11.05v59.28c0,4.54-2.44,8.77-6.38,11.05l-51.33,29.64c-1.97,1.14-4.17,1.7-6.38,1.7Zm0-138.72c-1.28,0-2.57,.33-3.71,.99L9.04,35.95c-2.29,1.32-3.71,3.79-3.71,6.43v59.28c0,2.64,1.42,5.11,3.71,6.43l51.33,29.64c2.29,1.32,5.14,1.32,7.43,0l51.33-29.64c2.29-1.32,3.71-3.79,3.71-6.43V42.39c0-2.64-1.42-5.11-3.71-6.43L67.8,6.32c-1.15-.66-2.43-.99-3.71-.99Z\"/>\n          <path class=\"cls-1\" d=\"M64.14,124.2h0c-1.47,0-2.66-1.19-2.66-2.66v-51.56c0-1.07-.64-2.03-1.62-2.45L22.03,51.43c-1.35-.58-1.98-2.14-1.41-3.49h0c.58-1.35,2.14-1.98,3.49-1.41l38.99,16.6c.66,.28,1.42,.28,2.08,0l39.29-16.61c1.35-.57,2.92,.06,3.49,1.42h0c.57,1.36-.06,2.92-1.42,3.49l-38.12,16.11c-.99,.42-1.63,1.38-1.63,2.45v51.55c0,1.47-1.19,2.66-2.66,2.66Z\"/>\n        </g>\n      </g>\n    </svg> \n    `,\n  })\n}\n","import loadComponents from './components'\nimport loadBlocks from './blocks'\n\nexport default (editor, opts = {}) => {\n  const options = {\n    ...{\n      // default options\n    },\n    ...opts,\n  }\n\n  // Add components\n  loadComponents(editor, options)\n  // Add blocks\n  loadBlocks(editor, options)\n}\n"]},"metadata":{},"sourceType":"script","externalDependencies":[]}